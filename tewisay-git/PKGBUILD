pkgname=tewisay-git
_gitname='tewisay'
pkgver=0.15.c720ea0
pkgrel=1
pkgdesc='Minimal cowsay replacement, with unicode and partial ansi escape support.'
url='https://github.com/neeee/tewisay'
license=('CC0')
makedepends=('go')
optdepends=('cowsay: default cowfiles')
arch=('i686' 'x86_64' 'ARM')
source=('git://github.com/neeee/tewisay.git')
md5sums=('SKIP')

pkgver() {
	cd "$srcdir/$_gitname"
	echo "0.$(git rev-list --count HEAD).$(git describe --always )"
}

build() {
	cd "$srcdir/$_gitname"
	go build
}

package() {
	cd "$srcdir/$_gitname"

	install -Dm755 tewisay "$pkgdir/usr/bin/tewisay"
	install -D -m0644 _tewisay \
		"$pkgdir/usr/share/zsh/site-functions/_tewisay"
	ln -s "tewisay" "$pkgdir/usr/bin/tewithink"
}
